(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,n){},119:function(e,n){},121:function(e,n){},138:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(61),c=t.n(i),o=t(66),u=t(9),l=t(140),s=function(e){return a.a.createElement("div",{className:"d-flex justify-content-center align-items-center vh-100"},a.a.createElement("div",{className:"d-grid gap-2 col-2"},a.a.createElement("button",{type:"button",className:"btn btn-outline-primary btn-lg",onClick:function(){var n=Object(l.a)();e.history.push("/room/".concat(n))}},"Create Meeting")))},f=t(68),m=t(69),p=t(27),d=t(62),g=t.n(d),h=t(28),v=t.n(h),b=t(29);function E(){var e=Object(p.a)(["\n  height: 40%;\n  width: 50%;\n"]);return E=function(){return e},e}function j(){var e=Object(p.a)(["\n  padding: 20px;\n  display: flex;\n  height: 100vh;\n  width: 90%;\n  margin: auto;\n  flex-wrap: wrap;\n"]);return j=function(){return e},e}var w=b.a.div(j()),O=b.a.video(E()),I=function(e){var n=Object(r.useRef)();return Object(r.useEffect)((function(){e.peer.on("stream",(function(e){n.current.srcObject=e}))}),[e.peer]),a.a.createElement(O,{playsInline:!0,autoPlay:!0,ref:n})},y={height:window.innerHeight/2,width:window.innerWidth/2},D=g.a.connect("https://videochatserver-evr8.onrender.com");console.log(D);var k=function(e){var n=Object(r.useState)([]),t=Object(m.a)(n,2),i=t[0],c=t[1],o=Object(r.useRef)(),u=Object(r.useRef)([]),l=e.match.params.roomID;return console.log(e),Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:y,audio:!0}).then((function(e){o.current.srcObject=e,D.emit("join room",l),D.on("all users",(function(n){var t=[];n.forEach((function(n){var r=function(e,n,t){var r=new v.a({initiator:!0,trickle:!1,stream:t});return r.on("signal",(function(t){D.emit("sending signal",{userToSignal:e,callerID:n,signal:t})})),r}(n,D.id,e);u.current.push({peerID:n,peer:r}),t.push(r)})),c(t)})),D.on("user joined",(function(n){var t=function(e,n,t){var r=new v.a({initiator:!1,trickle:!1,stream:t});return r.on("signal",(function(e){D.emit("returning signal",{signal:e,callerID:n})})),r.signal(e),r}(n.signal,n.callerID,e);u.current.push({peerID:n.callerID,peer:t}),c((function(e){return[].concat(Object(f.a)(e),[t])}))})),D.on("receiving returned signal",(function(e){u.current.find((function(n){return n.peerID===e.id})).peer.signal(e.signal)}))}))}),[l]),a.a.createElement(w,null,a.a.createElement(O,{muted:!0,ref:o,autoPlay:!0,playsInline:!0}),i.map((function(e,n){return null!=e._remoteStreams?a.a.createElement(I,{key:n,peer:e}):null})))};var x=function(){return a.a.createElement(o.a,null,a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/",exact:!0,component:s}),a.a.createElement(u.a,{path:"/room/:roomID",component:k})))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,null)),document.getElementById("root"))},70:function(e,n,t){e.exports=t(138)}},[[70,1,2]]]);
//# sourceMappingURL=main.b3674cfe.chunk.js.map